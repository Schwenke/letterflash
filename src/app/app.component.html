<!DOCTYPE html>

<mat-progress-spinner class="spinner" *ngIf="!initialized" mode="indeterminate"></mat-progress-spinner>

<mat-sidenav-container class="app-container" *ngIf="initialized">

    <!-- FAQ left side nav -->
    <mat-sidenav role="region" class="faq-sidenav" autoFocus="false" #faq>
        <app-faq (closeButtonClicked)="faq.toggle()"></app-faq>
    </mat-sidenav>

    <!-- Options right side nav -->
    <mat-sidenav role="region" class="options-sidenav" autoFocus="false" #options position="end">
        <app-options (newGameClicked)="startNewGame()" (viewHistoryClicked)="viewHistory()"
            (viewStatsClicked)="viewStats()" (closeButtonClicked)="options.toggle()" (concedeClicked)="concede()"
            (viewResultsClicked)="viewResults()"></app-options>
    </mat-sidenav>

    <!-- Main body -->
    <mat-sidenav-content class="game" role="main">
        <div class="game-header" role="banner">
            <!-- DEBUG -->
            <!-- Secret: {{session.secret}} -->
            <mat-icon class="icon-button" (click)="faq.toggle()" aria-label="Information">help</mat-icon>

            <h1 *ngIf="showGame && !isGameOver()" aria-label="Letter Flash" class="game-title">Letter Flash</h1>

            <button mat-raised-button role="button" color="accent" *ngIf="isGameOver() && !(showHistory || showStats)"
                (click)="openResultsDialog()">View results</button>

            <button mat-raised-button role="button" color="accent" *ngIf="showHistory || showStats"
                (click)="viewGame()">Return to game</button>

            <mat-icon class="icon-button" (click)="options.toggle()" aria-label="Options">settings</mat-icon>
        </div>

        <app-history [ngClass]="{'hidden': !showHistory}" class="history-board"></app-history>

        <app-stats [ngClass]="{'hidden': !showStats}" class="stats-board"></app-stats>

        <app-game-board [ngClass]="{'hidden': !showGame, 'shake': showError}" class="game-board"></app-game-board>

        <app-keyboard [ngClass]="{'hidden': !showGame}" class="game-keyboard"></app-keyboard>

    </mat-sidenav-content>

</mat-sidenav-container>

<router-outlet></router-outlet>